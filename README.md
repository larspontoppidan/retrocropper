
# RetroCropper

This repository contains hardware design files and software source for RetroCropper.

RetroCropper is an easy to make device that can perform horizontal and vertical cropping of a composite video signal. It was developed with the purpose of removing the vertical white line artifact generated by Commodore 64 computers, which is visible using certain upscaler devices.

The RetroCropper currently only works with PAL signals. NTSC signals should be possible to support with software enhancements.

Read a full description of the project here: https://larsee.com/blog/2023/5/retrocropper

## Hardware

A KiCad 7.0 project archive and related files can be found in the hw folder of this repository including a partial bill of materials.

Note that rev. A has erratas, see blog post linked above.

## Compiling the software

The software can be compiled on Linux with the following steps:

Install avr-gcc, avrdude and cmake:

```
sudo apt install gcc-avr avr-libc avrdude cmake build-essential
```

In the root of the project run:

```
./make_release
```

### Flashing the target

The project is set up for using the AVRISP mkII programmer. This can be changed in the CMakeLists.txt file.

In order to access the AVRISP mkII device in Linux, make sure the current user is in the dialout group. If not: `sudo adduser USERNAME dialout` and log out and log in.

Connect the programmer and supply power to the target.

First the fuses must be flashed. This can be done with:

```
./make_release fuses
```

After this, the upload command should work and will flash the device:

```
./make_release upload
```

